<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BrightProject - إدارة المشاريع الذكية</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --success: #27ae60;
            --danger: #e74c3c;
            --warning: #f39c12;
            --info: #3498db;
            --light: #f8f9fa;
            --dark: #2c3e50;
            --shadow: 0 10px 30px rgba(0,0,0,0.1);
            --gradient: linear-gradient(135deg, var(--primary), var(--secondary));
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--gradient);
            min-height: 100vh;
            perspective: 1000px;
            overflow-x: hidden;
        }

        /* Navigation */
        .navbar {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 15px 0;
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }

        .logo {
            font-size: 1.8em;
            font-weight: bold;
            color: var(--primary);
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 30px;
        }

        .nav-item {
            cursor: pointer;
            padding: 10px 15px;
            border-radius: 25px;
            transition: all 0.3s ease;
            color: var(--dark);
        }

        .nav-item:hover, .nav-item.active {
            background: var(--gradient);
            color: white;
            transform: translateY(-2px);
        }

        /* Main Container */
        .container {
            max-width: 1400px;
            margin: 80px auto 0;
            padding: 20px;
        }

        /* Header */
        .header {
            text-align: center;
            color: white;
            margin-bottom: 50px;
            transform: translateZ(50px);
        }

        .header h1 {
            font-size: 3.5em;
            margin-bottom: 20px;
            text-shadow: 0 5px 15px rgba(0,0,0,0.3);
            animation: float 3s ease-in-out infinite;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }

        /* Dashboard Cards */
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: var(--shadow);
            transform-style: preserve-3d;
            transition: all 0.4s ease;
            cursor: pointer;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .card:hover {
            transform: rotateY(5deg) rotateX(5deg) translateZ(20px);
            box-shadow: 0 25px 50px rgba(0,0,0,0.2);
        }

        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .card-icon {
            width: 60px;
            height: 60px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
            margin-left: 15px;
        }

        .projects-icon { background: linear-gradient(135deg, #ff6b6b, #ee5a24); }
        .analytics-icon { background: linear-gradient(135deg, #4ecdc4, #26d0ce); }
        .sales-icon { background: linear-gradient(135deg, #45b7d1, #2980b9); }
        .ai-icon { background: linear-gradient(135deg, #f39c12, #e67e22); }

        .card h3 {
            color: var(--dark);
            font-size: 1.4em;
            margin-bottom: 10px;
        }

        .card p {
            color: #7f8c8d;
            line-height: 1.5;
            margin-bottom: 20px;
        }

        .feature-list {
            list-style: none;
            margin-bottom: 20px;
        }

        .feature-list li {
            padding: 8px 0;
            color: #34495e;
            border-bottom: 1px solid #ecf0f1;
            position: relative;
            padding-right: 25px;
        }

        .feature-list li:before {
            content: "✓";
            color: var(--success);
            font-weight: bold;
            position: absolute;
            right: 0;
        }

        .btn {
            background: var(--gradient);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            width: 100%;
            position: relative;
            overflow: hidden;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover:before {
            left: 100%;
        }

        /* Section Views */
        .section-view {
            display: none;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
        }

        .section-view.active {
            display: block;
            animation: slideIn 0.5s ease;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #eee;
        }

        .section-title {
            font-size: 2em;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .back-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        /* Project Management Interface */
        .project-grid {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .project-sidebar {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
        }

        .project-main {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .project-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: var(--primary);
        }

        .stat-label {
            color: #666;
            margin-top: 5px;
        }

        .task-list {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
        }

        .task-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #eee;
            transition: background 0.3s ease;
        }

        .task-item:hover {
            background: #f8f9fa;
        }

        .task-status {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }

        .status-pending { background: #fff3cd; color: #856404; }
        .status-progress { background: #d1ecf1; color: #0c5460; }
        .status-completed { background: #d4edda; color: #155724; }

        /* Analytics Interface */
        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .chart-container {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            min-height: 400px;
        }

        .chart-title {
            font-size: 1.2em;
            color: var(--dark);
            margin-bottom: 20px;
            text-align: center;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .metric-card:before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: shimmer 3s infinite;
        }

        .metric-value {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .metric-label {
            opacity: 0.9;
            font-size: 1.1em;
        }

        /* AI Chat Interface */
        .ai-chat {
            position: fixed;
            bottom: 30px;
            left: 30px;
            width: 400px;
            height: 600px;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            display: none;
            flex-direction: column;
            backdrop-filter: blur(15px);
            z-index: 1000;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .chat-header {
            background: var(--gradient);
            color: white;
            padding: 20px;
            border-radius: 20px 20px 0 0;
            text-align: center;
            position: relative;
        }

        .chat-close {
            position: absolute;
            top: 15px;
            left: 15px;
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            transition: background 0.3s ease;
        }

        .chat-close:hover {
            background: rgba(255,255,255,0.2);
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: #ccc transparent;
        }

        .chat-messages::-webkit-scrollbar {
            width: 6px;
        }

        .chat-messages::-webkit-scrollbar-track {
            background: transparent;
        }

        .chat-messages::-webkit-scrollbar-thumb {
            background: #ccc;
            border-radius: 3px;
        }

        .message {
            margin-bottom: 15px;
            padding: 12px 18px;
            border-radius: 18px;
            max-width: 85%;
            animation: messageSlide 0.3s ease;
        }

        .user-message {
            background: var(--gradient);
            color: white;
            margin-right: auto;
            border-bottom-right-radius: 5px;
        }

        .ai-message {
            background: #f1f3f4;
            color: #333;
            margin-left: auto;
            border-bottom-left-radius: 5px;
        }

        .typing-indicator {
            display: none;
            padding: 15px;
            text-align: center;
            color: #666;
        }

        .typing-dots {
            display: inline-flex;
            gap: 3px;
        }

        .typing-dots span {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #ccc;
            animation: typing 1.4s infinite;
        }

        .typing-dots span:nth-child(2) { animation-delay: 0.2s; }
        .typing-dots span:nth-child(3) { animation-delay: 0.4s; }

        .chat-input-container {
            padding: 20px;
            border-top: 1px solid #eee;
            display: flex;
            gap: 10px;
        }

        .chat-input {
            flex: 1;
            padding: 12px 18px;
            border: 1px solid #ddd;
            border-radius: 25px;
            outline: none;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .chat-input:focus {
            border-color: var(--primary);
        }

        .send-btn {
            background: var(--gradient);
            color: white;
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s ease;
        }

        .send-btn:hover {
            transform: scale(1.1);
        }

        .floating-btn {
            position: fixed;
            bottom: 30px;
            left: 30px;
            width: 60px;
            height: 60px;
            background: var(--gradient);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 24px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
            z-index: 999;
        }

        .floating-btn:hover {
            transform: scale(1.1) translateY(-2px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.4);
        }

        /* Forms */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            color: var(--dark);
            font-weight: 600;
        }

        .form-input {
            width: 100%;
            padding: 12px 18px;
            border: 1px solid #ddd;
            border-radius: 10px;
            outline: none;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .form-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-select {
            width: 100%;
            padding: 12px 18px;
            border: 1px solid #ddd;
            border-radius: 10px;
            outline: none;
            background: white;
            cursor: pointer;
        }

        /* Progress Bar */
        .progress-bar {
            background: #e9ecef;
            border-radius: 10px;
            height: 8px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient);
            transition: width 0.3s ease;
            border-radius: 10px;
        }

        /* Animations */
        @keyframes float {
            0%, 100% { transform: translateY(0px) translateZ(50px); }
            50% { transform: translateY(-20px) translateZ(50px); }
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes messageSlide {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }

        @keyframes shimmer {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-menu {
                display: none;
            }
            
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .project-grid {
                grid-template-columns: 1fr;
            }
            
            .analytics-grid {
                grid-template-columns: 1fr;
            }
            
            .ai-chat {
                width: 95%;
                height: 80%;
                bottom: 10px;
                left: 2.5%;
            }
            
            .header h1 {
                font-size: 2.5em;
            }
            
            .metrics-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Dark mode toggle */
        .theme-toggle {
            background: none;
            border: none;
            color: var(--dark);
            font-size: 20px;
            cursor: pointer;
            padding: 10px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            background: rgba(0,0,0,0.1);
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 100px;
            right: 20px;
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: var(--shadow);
            z-index: 1001;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            border-left: 4px solid var(--success);
        }

        .notification.error {
            border-left: 4px solid var(--danger);
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">🚀 BrightProject</div>
            <ul class="nav-menu">
                <li class="nav-item active" onclick="showSection('dashboard')">
                    <i class="fas fa-home"></i> الرئيسية
                </li>
                <li class="nav-item" onclick="showSection('projects')">
                    <i class="fas fa-project-diagram"></i> المشاريع
                </li>
                <li class="nav-item" onclick="showSection('analytics')">
                    <i class="fas fa-chart-line"></i> التحليلات
                </li>
                <li class="nav-item" onclick="showSection('sales')">
                    <i class="fas fa-shopping-cart"></i> المبيعات
                </li>
                <li class="nav-item" onclick="showSection('purchases')">
                    <i class="fas fa-shopping-bag"></i> المشتريات
                </li>
            </ul>
            <button class="theme-toggle" onclick="toggleTheme()">
                <i class="fas fa-moon"></i>
            </button>
        </div>
    </nav>

    <div class="container">
        <!-- Dashboard Section -->
        <div id="dashboard" class="section-view active">
            <header class="header">
                <h1>🚀 BrightProject</h1>
                <p>روبوت إدارة مشاريع ذكي يساعد الفرق في السعودية على تنظيم المهام، متابعة التقدم، تحسين التواصل، وضمان إنجاز المشاريع في الوقت المحدد وبأعلى جودة</p>
            </header>

            <div class="dashboard">
                <div class="card" onclick="showSection('projects')">
                    <div class="card-header">
                        <div class="card-icon projects-icon">
                            <i class="fas fa-project-diagram"></i>
                        </div>
                        <div>
                            <h3>إدارة المشاريع</h3>
                            <p>تنظيم وإدارة جميع مشاريعك بكفاءة</p>
                        </div>
                    </div>
                    <ul class="feature-list">
                        <li>تتبع المهام والمواعيد النهائية</li>
                        <li>إدارة الفرق والتعاون</li>
                        <li>تخطيط الموارد والميزانيات</li>
                        <li>تقارير التقدم التلقائية</li>
                    </ul>
                    <button class="btn">بدء المشروع</button>
                </div>

                <div class="card" onclick="showSection('sales')">
                    <div class="card-header">
                        <div class="card-icon analytics-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div>
                            <h3>تحليلات المبيعات</h3>
                            <p>فهم عميق لأداء مبيعاتك وأرباحك</p>
                        </div>
                    </div>
                    <ul class="feature-list">
                        <li>تحليل اتجاهات المبيعات</li>
                        <li>تحديد مصادر الربح والخسارة</li>
                        <li>توقعات المبيعات المستقبلية</li>
                        <li>تقارير تفاعلية ذكية</li>
                    </ul>
                    <button class="btn">تحليل المبيعات</button>
                </div>

                <div class="card" onclick="showSection('purchases')">
                    <div class="card-header">
                        <div class="card-icon sales-icon">
                            <i class="fas fa-shopping-bag"></i>
                        </div>
                        <div>
                            <h3>تحليلات المشتريات</h3>
                            <p>تحسين استراتيجيات الشراء وإدارة التكاليف</p>
                        </div>
                    </div>
                    <ul class="feature-list">
                        <li>تتبع تكاليف المشتريات</li>
                        <li>تحليل أداء الموردين</li>
                        <li>تحسين دورة الشراء</li>
                        <li>إدارة المخزون الذكية</li>
                    </ul>
                    <button class="btn">تحليل المشتريات</button>
                </div>

                <div class="card" onclick="toggleAIChat()">
                    <div class="card-header">
                        <div class="card-icon ai-icon">
                            <i class="fas fa-robot"></i>
                        </div>
                        <div>
                            <h3>المساعد الذكي</h3>
                            <p>ذكاء اصطناعي لدعم قراراتك التجارية</p>
                        </div>
                    </div>
                    <ul class="feature-list">
                        <li>استشارات إدارية ذكية</li>
                        <li>تحليل البيانات التلقائي</li>
                        <li>توصيات محسنة</li>
                        <li>دعم فوري 24/7</li>
                    </ul>
                    <button class="btn">تحدث مع الذكاء الاصطناعي</button>
                </div>
            </div>
        </div>

        <!-- Projects Section -->
        <div id="projects" class="section-view">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-project-diagram"></i>
                    إدارة المشاريع
                </h2>
                <button class="back-btn" onclick="showSection('dashboard')">
                    <i class="fas fa-arrow-right"></i> العودة
                </button>
            </div>

            <div class="project-stats">
                <div class="stat-card">
                    <div class="stat-number">12</div>
                    <div class="stat-label">مشاريع نشطة</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">85%</div>
                    <div class="stat-label">معدل الإنجاز</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">6</div>
                    <div class="stat-label">فرق العمل</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">42</div>
                    <div class="stat-label">مهام اليوم</div>
                </div>
            </div>

            <div class="project-grid">
                <div class="project-sidebar">
                    <h3>إنشاء مشروع جديد</h3>
                    <form id="projectForm">
                        <div class="form-group">
                            <label class="form-label">اسم المشروع</label>
                            <input type="text" class="form-input" placeholder="أدخل اسم المشروع">
                        </div>
                        <div class="form-group">
                            <label class="form-label">الوصف</label>
                            <textarea class="form-input" rows="3" placeholder="وصف المشروع"></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">تاريخ البداية</label>
                            <input type="date" class="form-input">
                        </div>
                        <div class="form-group">
                            <label class="form-label">تاريخ الانتهاء</label>
                            <input type="date" class="form-input">
                        </div>
                        <div class="form-group">
                            <label class="form-label">الأولوية</label>
                            <select class="form-select">
                                <option>عالية</option>
                                <option>متوسطة</option>
                                <option>منخفضة</option>
                            </select>
                        </div>
                        <button type="submit" class="btn">إنشاء المشروع</button>
                    </form>
                </div>

                <div class="project-main">
                    <h3>المشاريع الحالية</h3>
                    <div class="task-list">
                        <div class="task-item">
                            <div>
                                <h4>تطوير تطبيق الجوال</h4>
                                <p>تطوير تطبيق إدارة المشاريع للأجهزة المحمولة</p>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 75%"></div>
                                </div>
                            </div>
                            <span class="task-status status-progress">قيد التنفيذ</span>
                        </div>
                        <div class="task-item">
                            <div>
                                <h4>حملة التسويق الرقمي</h4>
                                <p>إطلاق حملة تسويقية شاملة على وسائل التواصل</p>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 100%"></div>
                                </div>
                            </div>
                            <span class="task-status status-completed">مكتمل</span>
                        </div>
                        <div class="task-item">
                            <div>
                                <h4>تحديث النظام الأساسي</h4>
                                <p>ترقية البنية التحتية وتحسين الأداء</p>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 30%"></div>
                                </div>
                            </div>
                            <span class="task-status status-pending">في الانتظار</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Analytics Section -->
        <div id="analytics" class="section-view">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-chart-line"></i>
                    التحليلات الشاملة
                </h2>
                <button class="back-btn" onclick="showSection('dashboard')">
                    <i class="fas fa-arrow-right"></i> العودة
                </button>
            </div>

            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-value">₺2.5M</div>
                    <div class="metric-label">إجمالي المبيعات</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">+15%</div>
                    <div class="metric-label">نمو المبيعات</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">₺450K</div>
                    <div class="metric-label">صافي الربح</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">18%</div>
                    <div class="metric-label">هامش الربح</div>
                </div>
            </div>

            <div class="analytics-grid">
                <div class="chart-container">
                    <h3 class="chart-title">اتجاهات المبيعات الشهرية</h3>
                    <canvas id="salesChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3 class="chart-title">توزيع الأرباح حسب المنتج</h3>
                    <canvas id="profitChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3 class="chart-title">مقارنة المبيعات والمشتريات</h3>
                    <canvas id="comparisonChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3 class="chart-title">تحليل أسباب الربح والخسارة</h3>
                    <canvas id="plAnalysisChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Sales Section -->
        <div id="sales" class="section-view">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-shopping-cart"></i>
                    تحليلات المبيعات
                </h2>
                <button class="back-btn" onclick="showSection('dashboard')">
                    <i class="fas fa-arrow-right"></i> العودة
                </button>
            </div>

            <div class="analytics-grid">
                <div class="chart-container">
                    <h3 class="chart-title">أداء المبيعات اليومي</h3>
                    <canvas id="dailySalesChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3 class="chart-title">أفضل المنتجات مبيعاً</h3>
                    <canvas id="topProductsChart"></canvas>
                </div>
            </div>

            <div class="task-list">
                <h3>تقرير المبيعات التفصيلي</h3>
                <div class="task-item">
                    <div>
                        <h4>منتج A</h4>
                        <p>المبيعات: ₺150,000 | الربح: ₺45,000 | النمو: +12%</p>
                    </div>
                    <span class="task-status status-completed">مربح</span>
                </div>
                <div class="task-item">
                    <div>
                        <h4>منتج B</h4>
                        <p>المبيعات: ₺80,000 | الربح: ₺-5,000 | النمو: -8%</p>
                    </div>
                    <span class="task-status status-pending">خاسر</span>
                </div>
                <div class="task-item">
                    <div>
                        <h4>منتج C</h4>
                        <p>المبيعات: ₺200,000 | الربح: ₺60,000 | النمو: +25%</p>
                    </div>
                    <span class="task-status status-completed">مربح جداً</span>
                </div>
            </div>
        </div>

        <!-- Purchases Section -->
        <div id="purchases" class="section-view">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-shopping-bag"></i>
                    تحليلات المشتريات
                </h2>
                <button class="back-btn" onclick="showSection('dashboard')">
                    <i class="fas fa-arrow-right"></i> العودة
                </button>
            </div>

            <div class="analytics-grid">
                <div class="chart-container">
                    <h3 class="chart-title">تكاليف المشتريات الشهرية</h3>
                    <canvas id="purchaseCostsChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3 class="chart-title">أداء الموردين</h3>
                    <canvas id="suppliersChart"></canvas>
                </div>
            </div>

            <div class="task-list">
                <h3>تقرير المشتريات والموردين</h3>
                <div class="task-item">
                    <div>
                        <h4>مورد المواد الخام</h4>
                        <p>التكلفة: ₺300,000 | الجودة: ممتازة | التسليم: في الوقت</p>
                    </div>
                    <span class="task-status status-completed">مفضل</span>
                </div>
                <div class="task-item">
                    <div>
                        <h4>مورد التقنية</h4>
                        <p>التكلفة: ₺150,000 | الجودة: جيدة | التسليم: متأخر</p>
                    </div>
                    <span class="task-status status-progress">قيد المراجعة</span>
                </div>
            </div>
        </div>
    </div>

    <!-- AI Chat -->
    <button class="floating-btn" onclick="toggleAIChat()" id="chatToggle">
        <i class="fas fa-comments"></i>
    </button>

    <div class="ai-chat" id="aiChat">
        <div class="chat-header">
            <button class="chat-close" onclick="toggleAIChat()">
                <i class="fas fa-times"></i>
            </button>
            <h3><i class="fas fa-robot"></i> المساعد الذكي</h3>
            <p>كيف يمكنني مساعدتك اليوم؟</p>
        </div>
        <div class="chat-messages" id="chatMessages">
            <div class="message ai-message">
                مرحباً! أنا مساعدك الذكي في BrightProject. يمكنني مساعدتك في:
                <br>• تحليل المشاريع والمهام
                <br>• تحليل المبيعات وأسباب الربح/الخسارة  
                <br>• تحليل المشتريات وتحسين التكاليف
                <br>• تقديم نصائح لتحسين الأعمال
            </div>
        </div>
        <div class="typing-indicator" id="typingIndicator">
            <div class="typing-dots">
                <span></span>
                <span></span>
                <span></span>
            </div>
            جاري الكتابة...
        </div>
        <div class="chat-input-container">
            <input type="text" class="chat-input" id="chatInput" 
                   placeholder="اكتب سؤالك هنا..." 
                   onkeypress="handleEnterKey(event)">
            <button class="send-btn" onclick="sendMessage()">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">
        <div id="notificationContent"></div>
    </div>

    <script>
        const API_KEY = 'AIzaSyAquNVYw6VOmAKTtKtTPU7Tl3PVIG0sKhg';
        const API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent';

        let chatVisible = false;
        let currentSection = 'dashboard';

        // Navigation Functions
        function showSection(section) {
            // Hide all sections
            document.querySelectorAll('.section-view').forEach(view => {
                view.classList.remove('active');
            });

            // Remove active class from nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });

            // Show selected section
            document.getElementById(section).classList.add('active');
            
            // Add active class to nav item
            if (section !== 'dashboard') {
                const navItems = document.querySelectorAll('.nav-item');
                navItems.forEach(item => {
                    if (item.textContent.includes(getSectionName(section))) {
                        item.classList.add('active');
                    }
                });
            } else {
                document.querySelector('.nav-item').classList.add('active');
            }

            currentSection = section;
            
            // Initialize charts for analytics sections
            if (section === 'analytics' || section === 'sales' || section === 'purchases') {
                setTimeout(initializeCharts, 100);
            }
        }

        function getSectionName(section) {
            const names = {
                'dashboard': 'الرئيسية',
                'projects': 'المشاريع',
                'analytics': 'التحليلات',
                'sales': 'المبيعات',
                'purchases': 'المشتريات'
            };
            return names[section] || '';
        }

        // Chat Functions
        function toggleAIChat() {
            const chat = document.getElementById('aiChat');
            const toggle = document.getElementById('chatToggle');
            
            chatVisible = !chatVisible;
            chat.style.display = chatVisible ? 'flex' : 'none';
            toggle.style.display = chatVisible ? 'none' : 'block';
        }

        function handleEnterKey(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        async function sendMessage() {
            const input = document.getElementById('chatInput');
            const messages = document.getElementById('chatMessages');
            const typingIndicator = document.getElementById('typingIndicator');
            
            const userMessage = input.value.trim();
            if (!userMessage) return;

            // Add user message
            const userDiv = document.createElement('div');
            userDiv.className = 'message user-message';
            userDiv.textContent = userMessage;
            messages.appendChild(userDiv);

            input.value = '';
            typingIndicator.style.display = 'block';
            messages.scrollTop = messages.scrollHeight;

            try {
                const contextualPrompt = `أنت مساعد ذكي في نظام BrightProject لإدارة المشاريع في السعودية. 
                المستخدم حالياً في قسم: ${getSectionName(currentSection)}
                
                يمكنك مساعدة المستخدمين في:
                1. تحليل المشاريع وإدارتها بكفاءة
                2. تحليل المبيعات وتحديد أسباب الربح والخسارة بدقة
                3. تحليل المشتريات وتحسين التكاليف وإدارة الموردين
                4. تقديم نصائح عملية لتحسين الأعمال والإنتاجية
                5. توليد تقارير وإحصائيات مفيدة
                
                السؤال: ${userMessage}
                
                قدم إجابة مفيدة وعملية ومفصلة باللغة العربية، مع تقديم نصائح قابلة للتطبيق:`;

                const response = await fetch(`${API_URL}?key=${API_KEY}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: contextualPrompt
                            }]
                        }]
                    })
                });

                const data = await response.json();
                typingIndicator.style.display = 'none';

                if (data.candidates && data.candidates[0]) {
                    const aiResponse = data.candidates[0].content.parts[0].text;
                    
                    const aiDiv = document.createElement('div');
                    aiDiv.className = 'message ai-message';
                    aiDiv.innerHTML = aiResponse.replace(/\n/g, '<br>');
                    messages.appendChild(aiDiv);
                    
                    showNotification('تم استلام الرد بنجاح', 'success');
                } else {
                    throw new Error('لم يتم استلام رد صحيح من الخدمة');
                }
            } catch (error) {
                typingIndicator.style.display = 'none';
                
                const errorDiv = document.createElement('div');
                errorDiv.className = 'message ai-message';
                errorDiv.textContent = 'عذراً، حدث خطأ في الاتصال. يرجى المحاولة مرة أخرى لاحقاً.';
                messages.appendChild(errorDiv);
                
                showNotification('حدث خطأ في الاتصال', 'error');
                console.error('خطأ في API:', error);
            }

            messages.scrollTop = messages.scrollHeight;
        }

        // Chart Functions
        function initializeCharts() {
            // Sales Trend Chart
            const salesCtx = document.getElementById('salesChart');
            if (salesCtx) {
                new Chart(salesCtx, {
                    type: 'line',
                    data: {
                        labels: ['يناير', 'فبراير', 'مارس', 'أبريل', 'مايو', 'يونيو'],
                        datasets: [{
                            label: 'المبيعات',
                            data: [300000, 450000, 380000, 520000, 600000, 750000],
                            borderColor: '#667eea',
                            backgroundColor: 'rgba(102, 126, 234, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        return '₺' + (value/1000) + 'K';
                                    }
                                }
                            }
                        }
                    }
                });
            }

            // Profit Distribution Chart
            const profitCtx = document.getElementById('profitChart');
            if (profitCtx) {
                new Chart(profitCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['منتج A', 'منتج B', 'منتج C', 'منتج D'],
                        datasets: [{
                            data: [45000, 30000, 60000, 25000],
                            backgroundColor: [
                                '#667eea',
                                '#764ba2',
                                '#f093fb',
                                '#f5576c'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        }
                    }
                });
            }

            // Sales vs Purchases Comparison
            const comparisonCtx = document.getElementById('comparisonChart');
            if (comparisonCtx) {
                new Chart(comparisonCtx, {
                    type: 'bar',
                    data: {
                        labels: ['ينايرـ', 'فبراير', 'مارس', 'أبريل', 'مايو', 'يونيو'],
                        datasets: [{
                            label: 'المبيعات',
                            data: [300000, 450000, 380000, 520000, 600000, 750000],
                            backgroundColor: '#667eea'
                        }, {
                            label: 'المشتريات',
                            data: [180000, 270000, 220000, 310000, 350000, 400000],
                            backgroundColor: '#764ba2'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        return '₺' + (value/1000) + 'K';
                                    }
                                }
                            }
                        }
                    }
                });
            }

            // P&L Analysis Chart
            const plCtx = document.getElementById('plAnalysisChart');
            if (plCtx) {
                new Chart(plCtx, {
                    type: 'radar',
                    data: {
                        labels: ['التكاليف المتغيرة', 'التكاليف الثابتة', 'تكاليف التسويق', 'تكاليف التشغيل', 'أسعار البيع', 'حجم المبيعات'],
                        datasets: [{
                            label: 'الربح',
                            data: [85, 70, 60, 80, 90, 75],
                            borderColor: '#27ae60',
                            backgroundColor: 'rgba(39, 174, 96, 0.2)'
                        }, {
                            label: 'الخسارة',
                            data: [30, 40, 80, 35, 20, 25],
                            borderColor: '#e74c3c',
                            backgroundColor: 'rgba(231, 76, 60, 0.2)'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            r: {
                                beginAtZero: true,
                                max: 100
                            }
                        }
                    }
                });
            }

            // Daily Sales Chart
            const dailySalesCtx = document.getElementById('dailySalesChart');
            if (dailySalesCtx) {
                new Chart(dailySalesCtx, {
                    type: 'area',
                    data: {
                        labels: Array.from({length: 30}, (_, i) => i + 1),
                        datasets: [{
                            label: 'المبيعات اليومية',
                            data: Array.from({length: 30}, () => Math.floor(Math.random() * 50000) + 10000),
                            borderColor: '#667eea',
                            backgroundColor: 'rgba(102, 126, 234, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        }
                    }
                });
            }

            // Top Products Chart
            const topProductsCtx = document.getElementById('topProductsChart');
            if (topProductsCtx) {
                new Chart(topProductsCtx, {
                    type: 'horizontalBar',
                    data: {
                        labels: ['منتج A', 'منتج B', 'منتج C', 'منتج D', 'منتج E'],
                        datasets: [{
                            data: [150000, 120000, 100000, 80000, 60000],
                            backgroundColor: [
                                '#667eea',
                                '#764ba2',
                                '#f093fb',
                                '#f5576c',
                                '#4ecdc4'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        }
                    }
                });
            }

            // Purchase Costs Chart
            const purchaseCostsCtx = document.getElementById('purchaseCostsChart');
            if (purchaseCostsCtx) {
                new Chart(purchaseCostsCtx, {
                    type: 'line',
                    data: {
                        labels: ['يناير', 'فبراير', 'مارس', 'أبريل', 'مايو', 'يونيو'],
                        datasets: [{
                            label: 'تكاليف المشتريات',
                            data: [180000, 270000, 220000, 310000, 350000, 400000],
                            borderColor: '#e74c3c',
                            backgroundColor: 'rgba(231, 76, 60, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        }
                    }
                });
            }

            // Suppliers Performance Chart
            const suppliersCtx = document.getElementById('suppliersChart');
            if (suppliersCtx) {
                new Chart(suppliersCtx, {
                    type: 'polarArea',
                    data: {
                        labels: ['مورد A', 'مورد B', 'مورد C', 'مورد D'],
                        datasets: [{
                            data: [90, 75, 85, 60],
                            backgroundColor: [
                                '#667eea',
                                '#764ba2',
                                '#27ae60',
                                '#f39c12'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            r: {
                                beginAtZero: true,
                                max: 100
                            }
                        }
                    }
                });
            }
        }

        // Utility Functions
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const content = document.getElementById('notificationContent');
            
            content.textContent = message;
            notification.className = `notification ${type}`;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        function toggleTheme() {
            const body = document.body;
            const themeIcon = document.querySelector('.theme-toggle i');
            
            body.classList.toggle('dark-theme');
            themeIcon.classList.toggle('fa-moon');
            themeIcon.classList.toggle('fa-sun');
        }

        // Form Handling
        document.getElementById('projectForm').addEventListener('submit', function(e) {
            e.preventDefault();
            showNotification('تم إنشاء المشروع بنجاح!', 'success');
            this.reset();
        });

        // Initialize Charts on Load
        document.addEventListener('DOMContentLoaded', function() {
            // Add animation to cards
            const cards = document.querySelectorAll('.card');
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver(function(entries) {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, observerOptions);

            cards.forEach(card => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(50px)';
                card.style.transition = 'all 0.6s ease';
                observer.observe(card);
            });

            // Initialize charts for the analytics section
            setTimeout(initializeCharts, 500);
        });

        // Quick Actions
        function openProjectManager() {
            showSection('projects');
            showNotification('تم فتح مدير المشاريع', 'success');
        }

        function analyzeSales() {
            showSection('sales');
            showNotification('جاري تحليل بيانات المبيعات...', 'success');
        }

        function analyzePurchases() {
            showSection('purchases');
            showNotification('جاري تحليل بيانات المشتريات...', 'success');
        }
    </script>
</body>
</html>